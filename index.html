<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>J√¥natas & √ârica</title>

<style>
@import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

* { touch-action: none; }

body{
  margin:0;
  background:black;
  overflow:hidden;
  font-family:'Press Start 2P', cursive;
}

canvas{display:none}

#start{
  position:fixed;
  inset:0;
  background:black;
  color:#22c55e;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  text-align:center;
}

#title{
  font-size:26px;
  animation: blink 1s infinite alternate;
}

@keyframes blink{
  from{opacity:.5}
  to{opacity:1}
}

#btn{
  margin-top:30px;
  padding:15px 30px;
  background:#22c55e;
  color:black;
  border:none;
  font-size:14px;
  font-family:'Press Start 2P';
}

#hud{
  position:fixed;
  top:10px;
  left:10px;
  color:white;
  z-index:5;
  font-size:12px;
}

#controls{
  position:fixed;
  bottom:10px;
  left:50%;
  transform:translateX(-50%);
  display:flex;
  gap:10px;
  z-index:10;
}

.btn{
  width:55px;
  height:55px;
  border-radius:50%;
  background:rgba(255,255,255,.2);
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:20px;
  color:white;
}
</style>
</head>

<body>

<div id="start">
  <div id="title">J√îNATAS</div>
  <div style="font-size:14px;margin-top:10px;">& √âRICA</div>
  <button id="btn" onclick="startGame()">‚ñ∂ START</button>
</div>

<div id="hud">
‚ù§Ô∏è Vida: <span id="life">100</span><br>
üèÜ Fase: <span id="level">1</span><br>
‚≠ê Score: <span id="score">0</span>
</div>

<canvas id="game"></canvas>

<div id="controls">
  <div class="btn" ontouchstart="keys.a=true" ontouchend="keys.a=false">‚¨ÖÔ∏è</div>
  <div class="btn" ontouchstart="keys.w=true" ontouchend="keys.w=false">‚¨ÜÔ∏è</div>
  <div class="btn" ontouchstart="keys.s=true" ontouchend="keys.s=false">‚¨áÔ∏è</div>
  <div class="btn" ontouchstart="keys.d=true" ontouchend="keys.d=false">‚û°Ô∏è</div>
  <div class="btn" ontouchstart="shoot()">‚ö°</div>
</div>

<!-- Sons -->
<audio id="introMusic" loop>
  <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3">
</audio>

<audio id="shootSound">
  <source src="https://www.soundjay.com/button/sounds/button-16.mp3">
</audio>

<audio id="gameOverSound">
  <source src="https://www.soundjay.com/misc/sounds/fail-buzzer-01.mp3">
</audio>

<script>
const canvas=document.getElementById('game');
const ctx=canvas.getContext('2d');
function resize(){canvas.width=innerWidth;canvas.height=innerHeight}
resize(); onresize=resize;

let keys={},life=100,level=1,score=0;
const player={x:150,y:150,size:26,speed:4};
let enemies=[],princess={},shots=[];

function startGame(){
  document.getElementById("start").style.display="none";
  canvas.style.display="block";
  document.getElementById("introMusic").play();
  newLevel();
  loop();
}

function newLevel(){
  enemies=[];
  for(let i=0;i<level*5;i++){
    enemies.push({
      x:Math.random()*canvas.width,
      y:Math.random()*canvas.height,
      size:24,
      life:30,
      speed:1+level*0.2,
      points:10
    });
  }
  princess={x:Math.random()*canvas.width,y:Math.random()*canvas.height,size:14};
  document.getElementById("level").innerText=level;
}

document.onkeydown=e=>keys[e.key.toLowerCase()]=true;
document.onkeyup=e=>keys[e.key.toLowerCase()]=false;

function move(){
  if(keys.w)player.y-=player.speed;
  if(keys.s)player.y+=player.speed;
  if(keys.a)player.x-=player.speed;
  if(keys.d)player.x+=player.speed;
}

function shoot(){
  document.getElementById("shootSound").play();
  shots.push({
    x:player.x+player.size/2,
    y:player.y+player.size/2,
    dx:8,
    dy:0,
    size:5
  });
}

function updateShots(){
  shots.forEach((s,i)=>{
    s.x+=s.dx;
    ctx.fillStyle="#38bdf8";
    ctx.beginPath();
    ctx.arc(s.x,s.y,s.size,0,Math.PI*2);
    ctx.fill();

    enemies.forEach((e,ei)=>{
      if(dist(s,e)<20){
        enemies.splice(ei,1);
        shots.splice(i,1);
        score+=e.points;
        document.getElementById("score").innerText=score;
      }
    });
  });
}

function drawMap(){
  ctx.fillStyle="#020617";
  ctx.fillRect(0,0,canvas.width,canvas.height);
}

function drawPlayer(){
  ctx.fillStyle="#22c55e";
  ctx.fillRect(player.x,player.y,player.size,player.size);
}

function drawEnemies(){
  enemies.forEach(e=>{
    ctx.fillStyle="#ef4444";
    ctx.fillRect(e.x,e.y,e.size,e.size);
  });
}

function drawPrincess(){
  ctx.fillStyle="hotpink";
  ctx.beginPath();
  ctx.arc(princess.x,princess.y,princess.size,0,Math.PI*2);
  ctx.fill();
}

function enemyAI(){
  enemies.forEach(e=>{
    e.x+=(player.x-e.x)*0.01;
    e.y+=(player.y-e.y)*0.01;
    if(collide(player,e)){
      life-=0.4;
      document.getElementById("life").innerText=Math.floor(life);
    }
  });
}

function rescue(){
  if(dist(player,princess)<35){
    alert(\"üíñ Voc√™ salvou √ârica!\");
    level++;
    newLevel();
  }
}

function collide(a,b){
  return a.x<b.x+b.size && a.x+a.size>b.x && a.y<b.y+b.size && a.y+a.size>b.y;
}

function dist(a,b){
  return Math.hypot(a.x-b.x,a.y-b.y);
}

function loop(){
  drawMap();
  move();
  drawPlayer();
  drawEnemies();
  drawPrincess();
  enemyAI();
  updateShots();
  rescue();

  if(life<=0){
    document.getElementById(\"gameOverSound\").play();
    alert(\"GAME OVER\"); 
    location.reload();
  }

  requestAnimationFrame(loop);
}
</script>

</body>
</html>
